(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{193:function(e,t,n){},198:function(e,t,n){},199:function(e,t,n){},204:function(e,t,n){},205:function(e,t,n){},206:function(e,t,n){},207:function(e,t,n){},208:function(e,t,n){},209:function(e,t,n){},210:function(e,t,n){},211:function(e,t,n){},212:function(e,t,n){},214:function(e,t,n){},215:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(22),c=n.n(a),s=n(9),i=n(15),u=n(13),o=n(35),l=n(16),j="/login",d="/register",b="/",p="/points",O=n(227),h=n(228),f=n(216),x=n(10),v=n.n(x),m=n(14),g=n(129),y=n.n(g),w="http://localhost:4000/",k=y.a.create({baseURL:w}),C=y.a.create({baseURL:w});C.interceptors.request.use((function(e){return e.headers.authorization="Bearer ".concat(localStorage.getItem("token")),e}));var S=function(){var e=Object(m.a)(v.a.mark((function e(t){var n,r,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.post("api/auth/register",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(0),a=e.t0.response.data,e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(m.a)(v.a.mark((function e(t){var n,r,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.post("api/auth/login",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(0),a=e.t0.response.data,e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(m.a)(v.a.mark((function e(){var t,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.post("api/auth/check");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),r=e.t0.response.data,e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),P="AUTH:LOGIN",R="AUTH:CHECK",E="AUTH:LOGOUT",_="WIFI:CREATE_POINT",I="WIFI:UPDATE_POINT",T="WIFI:DELETE_POINT",F="WIFI:GET_ALL_POINTS",L="ERROR:SET_ERROR",U="ERROR:REMOVE_ERROR",z=function(e){return{type:L,data:e}},q=function(e){return function(){var t=Object(m.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(z(e)),setTimeout((function(){n({type:U})}),1500);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},H=function(e,t){return G[e](t)},G={email:function(e){return/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(String(e).toLowerCase())},password:function(e){return e.length>4&&e.length<20},string:function(e){return e.length>2}},M=(n(193),n(2)),W={registration:function(e){return function(){var t=Object(m.a)(v.a.mark((function t(n){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S(e);case 2:if((r=t.sent).success){t.next=6;break}return console.log(r),t.abrupt("return",n(q(r.message)));case 6:return t.abrupt("return",!0);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},login:function(e){return function(){var t=Object(m.a)(v.a.mark((function t(n){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A(e);case 2:if((r=t.sent).success){t.next=5;break}return t.abrupt("return",n(q(r.message)));case 5:return localStorage.setItem("token",r.token),n((a=r.user,{type:P,data:a})),t.abrupt("return",!0);case 8:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}()},setError:q},D=Object(i.b)(null,(function(e){return Object(u.b)(W,e)}))((function(e){var t=e.registration,n=e.login,a=e.setError,c=Object(l.g)(),i=Object(l.h)().pathname===j,u=Object(r.useState)(""),p=Object(s.a)(u,2),x=p[0],v=p[1],m=Object(r.useState)(""),g=Object(s.a)(m,2),y=g[0],w=g[1],k=Object(r.useState)(""),C=Object(s.a)(k,2),S=C[0],A=C[1];return Object(M.jsx)("div",{className:"page",children:Object(M.jsxs)(O.a,{className:"Auth",children:[Object(M.jsxs)("form",{children:[Object(M.jsx)("h2",{children:i?"Authorization":"Registration"}),Object(M.jsx)(h.a,{placeholder:"Email",value:x,onChange:function(e){return v(e.target.value)}}),Object(M.jsx)(h.a,{placeholder:"Password",type:"password",value:y,onChange:function(e){return w(e.target.value)}}),i||Object(M.jsx)(h.a,{placeholder:"Confirm password",type:"password",value:S,onChange:function(e){return A(e.target.value)}}),Object(M.jsx)(f.a,{type:"button",onClick:function(){return H("email",x)?H("password",y)?void(i?n({email:x,password:y}).then((function(e){return e&&c.push(b)})):y===S?t({email:x,password:y}).then((function(e){return e&&c.push(j)})):a("Password mismatch!")):a("Password must be 4-20 sign!"):a("Email not valid!")},children:i?"Sign in":"Registration"})]}),Object(M.jsx)("div",{className:"redirect",children:i?Object(M.jsxs)("div",{children:["No account? ",Object(M.jsx)(o.c,{to:d,children:"Register!"})]}):Object(M.jsxs)("div",{children:["Already has an account? ",Object(M.jsx)(o.c,{to:j,children:"Sign in!"})]})})]})})})),K=n(235),B=n(233),J=n(229),$=(n(198),function(){return Object(M.jsx)(K.a,{className:"Preloader",children:Object(M.jsx)(B.a,{active:!0,children:Object(M.jsx)(J.a,{})})})}),V=n(154),Y="AIzaSyCEuOy321bF_4zNmj8Ai4HbT2cEaRpe_2E",Z=function(e){var t=e.className;e.text;return Object(M.jsx)("div",{className:t?"Marker ".concat(t):"Marker"})},Q=(n(199),function(e){var t=e.width,n=e.height,r=e.points,a=e.filterRadius,c={lat:48.6208,lng:22.287883};return console.log(a),Object(M.jsx)("div",{className:"Map",style:{height:n,width:t},children:Object(M.jsx)(V.a,{bootstrapURLKeys:{key:Y},defaultCenter:c,center:a?a.coordinates:c,defaultZoom:14,children:r.length&&r.map((function(e){return Object(M.jsx)(Z,{lat:e.location.coordinates[0],lng:e.location.coordinates[1]},e._id)}))})})}),X=n(66),ee=n(230),te=n(76),ne=n.n(te),re=function(){var e=Object(m.a)(v.a.mark((function e(t){var n,r,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.post("api/wifi",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(0),a=e.t0.response.data,e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(m.a)(v.a.mark((function e(t,n){var r,a,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.put("api/wifi/".concat(t),n);case 3:return r=e.sent,a=r.data,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),c=e.t0.response.data,e.abrupt("return",c);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),ce=function(){var e=Object(m.a)(v.a.mark((function e(t){var n,r,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.delete("api/wifi/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(0),a=e.t0.response.data,e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(m.a)(v.a.mark((function e(){var t,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.get("api/wifi");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),r=e.t0.response.data,e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=Object(m.a)(v.a.mark((function e(t){var n,r,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.post("api/wifi/filter",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(0),a=e.t0.response.data,e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),ue=function(e){return{type:F,data:e}},oe=function(e){return{type:T,id:e}},le=function(){return function(){var e=Object(m.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se();case 2:if((n=e.sent).success){e.next=5;break}return e.abrupt("return",t(q(n.message)));case 5:t(ue(n.points));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},je=(n(204),{filterPoints:function(e){return function(){var t=Object(m.a)(v.a.mark((function t(n){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ie(e);case 2:if((r=t.sent).success){t.next=5;break}return t.abrupt("return",n(q(r.message)));case 5:n(ue(r.points));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setError:q,getAllPoints:le}),de=Object(i.b)(null,(function(e){return Object(u.b)(je,e)}))((function(e){var t=e.filterPoints,n=e.setError,a=e.getAllPoints,c=e.setFilterMarker,i=Object(r.useState)(!1),u=Object(s.a)(i,2),o=u[0],l=u[1],j=Object(r.useState)(""),d=Object(s.a)(j,2),b=d[0],p=d[1],O=Object(r.useState)(void 0),x=Object(s.a)(O,2),v=x[0],m=x[1],g=Object(r.useState)(""),y=Object(s.a)(g,2),w=y[0],k=y[1],C=Object(r.useState)(""),S=Object(s.a)(C,2),A=S[0],N=S[1],P=Object(r.useState)(""),R=Object(s.a)(P,2),E=R[0],_=R[1],I=Object(r.useState)(""),T=Object(s.a)(I,2),F=T[0],L=T[1],U=Object(r.useState)("all"),z=Object(s.a)(U,2),q=z[0],H=z[1],G=Object(r.useState)("all"),W=Object(s.a)(G,2),D=W[0],K=W[1];return Object(M.jsxs)("div",{className:"PointFilter",children:[Object(M.jsxs)("h2",{onClick:function(){return l(!o)},children:[Object(M.jsx)("span",{children:"Filter"}),Object(M.jsx)(X.a,{name:o?"angle up":"angle down"})]}),o&&Object(M.jsxs)(ee.a,{children:[Object(M.jsxs)("div",{children:[Object(M.jsx)(ne.a,{value:b,onChange:function(e){return function(e){k(""),p(e)}(e.target.value)},apiKey:Y,onPlaceSelected:function(e){return function(e){if(!e.formatted_address)return n("Undefined place");k(e),p(e.formatted_address),m({lat:e.geometry.location.lat(),lng:e.geometry.location.lng()})}(e)},options:{types:["address"],componentRestrictions:{country:"ua"}}}),Object(M.jsx)(h.a,{type:"number",placeholder:"Radius (m)...",value:A,onChange:function(e){return N(e.target.value)}})]}),Object(M.jsxs)("div",{children:[Object(M.jsx)(h.a,{placeholder:"Name...",value:E,onChange:function(e){return _(e.target.value)}}),Object(M.jsx)(h.a,{type:"number",placeholder:"Speed...",value:F,onChange:function(e){return L(e.target.value)}})]}),Object(M.jsxs)("div",{children:[Object(M.jsxs)(ee.a.Group,{inline:!0,children:[Object(M.jsx)("label",{children:"Type: "}),Object(M.jsx)(ee.a.Radio,{label:"All",value:"all",checked:"all"===q,onChange:function(e){return H("all")}}),Object(M.jsx)(ee.a.Radio,{label:"Open",value:"open",checked:"open"===q,onChange:function(e){return H("open")}}),Object(M.jsx)(ee.a.Radio,{label:"Secure",value:"secure",checked:"secure"===q,onChange:function(){return H("secure")}})]}),Object(M.jsxs)(ee.a.Group,{inline:!0,children:[Object(M.jsx)("label",{children:"Frequency (\u0413\u0413\u0446)"}),Object(M.jsx)(ee.a.Radio,{label:"All",value:"all",checked:"all"===q,onChange:function(e){return H("all")}}),Object(M.jsx)(ee.a.Radio,{label:"2.4",value:2.4,checked:2.4===D,onChange:function(e){return K(2.4)}}),Object(M.jsx)(ee.a.Radio,{label:"5",value:5,checked:5===D,onChange:function(){return K(5)}})]})]}),Object(M.jsxs)("div",{children:[Object(M.jsx)(f.a,{type:"button",className:"filter",onClick:function(){var e={radius:A,name:E,speed:F,type:"all"!==q?q:"",frequency:"all"!==D?D:""};return b&&!w.formatted_address?n("Undefined place"):F<0||F>500?n("bad speed!"):(w.formatted_address&&(e.coordinates=v),c({coordinates:v,radius:A}),void t(e))},children:"Filter"}),Object(M.jsx)(f.a,{type:"button",className:"clear",onClick:function(){p(""),m(void 0),k(""),N(""),_(""),H("all"),K("all"),a(),c(!1),l(!1)},children:"Clear"})]})]})]})})),be=(n(205),n(231)),pe=(n(206),function(e){var t=e.open,n=e.close,r=e.text,a=e.confirmCb;return Object(M.jsxs)(be.a,{className:"ConfirmModal",open:t,onClose:n,children:[Object(M.jsxs)(be.a.Content,{children:[Object(M.jsx)(X.a,{name:"warning sign"}),Object(M.jsx)("h3",{children:r})]}),Object(M.jsxs)(be.a.Actions,{children:[Object(M.jsx)(f.a,{color:"green",onClick:function(){a(),n()},children:"Yes"}),Object(M.jsx)(f.a,{color:"red",onClick:n,children:"No"})]})]})}),Oe=(n(207),{updatePoint:function(e,t){return function(){var n=Object(m.a)(v.a.mark((function n(r){var a;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ae(e,t);case 2:if((a=n.sent).success){n.next=5;break}return n.abrupt("return",r(q(a.message)));case 5:r((c=a.point,{type:I,data:c}));case 6:case"end":return n.stop()}var c}),n)})));return function(e){return n.apply(this,arguments)}}()}}),he=Object(i.b)(null,(function(e){return Object(u.b)(Oe,e)}))((function(e){var t=e.open,n=e.close,a=e.point,c=e.updatePoint,i=Object(r.useState)(a.name),u=Object(s.a)(i,2),o=u[0],l=u[1],j=Object(r.useState)(a.coordinates),d=Object(s.a)(j,2),b=d[0],p=d[1],O=Object(r.useState)(a.address),x=Object(s.a)(O,2),v=x[0],m=x[1],g=Object(r.useState)(a.type),y=Object(s.a)(g,2),w=y[0],k=y[1],C=Object(r.useState)(a.password),S=Object(s.a)(C,2),A=S[0],N=S[1],P=Object(r.useState)(a.speed),R=Object(s.a)(P,2),E=R[0],_=R[1],I=Object(r.useState)(a.frequency),T=Object(s.a)(I,2),F=T[0],L=T[1],U=Object(r.useState)(!1),z=Object(s.a)(U,2),q=z[0],G=z[1];return Object(M.jsxs)(be.a,{className:"UpdatePoint",onClose:n,open:t,children:[Object(M.jsx)(be.a.Header,{children:"Update point:"}),Object(M.jsx)(be.a.Content,{children:Object(M.jsxs)(be.a.Description,{children:[q&&Object(M.jsx)("div",{className:"error",children:q}),Object(M.jsxs)(ee.a,{children:[Object(M.jsx)(h.a,{placeholder:"Name...",value:o,onChange:function(e){return l(e.target.value)}}),Object(M.jsx)(ne.a,{value:v,onChange:function(e){return m(e.target.value)},apiKey:Y,onPlaceSelected:function(e){return function(e){m(e.formatted_address),p({lat:e.geometry.location.lat(),lng:e.geometry.location.lng()})}(e)},options:{types:["address"],componentRestrictions:{country:"ua"}}}),Object(M.jsxs)(ee.a.Group,{inline:!0,children:[Object(M.jsx)("label",{children:"Type: "}),Object(M.jsx)(ee.a.Radio,{label:"Open",value:"open",checked:"open"===w,onChange:function(e){return k("open")}}),Object(M.jsx)(ee.a.Radio,{label:"Secure",value:"secure",checked:"secure"===w,onChange:function(){return k("secure")}})]}),"secure"===w&&Object(M.jsx)(h.a,{placeholder:"Password...",value:A,onChange:function(e){return N(e.target.value)}}),Object(M.jsx)(h.a,{type:"number",placeholder:"Speed...",value:E,onChange:function(e){return _(e.target.value)}}),Object(M.jsxs)(ee.a.Group,{inline:!0,children:[Object(M.jsx)("label",{children:"Frequency (\u0413\u0413\u0446)"}),Object(M.jsx)(ee.a.Radio,{label:"2.4",value:2.4,checked:2.4===F,onChange:function(e){return L(2.4)}}),Object(M.jsx)(ee.a.Radio,{label:"5",value:5,checked:5===F,onChange:function(){return L(5)}})]})]})]})}),Object(M.jsx)(be.a.Actions,{children:Object(M.jsx)(f.a,{color:"teal",onClick:function(){return H("string",o)?!v||v.length<10||!b?G("Address error"):E<0||E>500?G("Speed error"):"secure"===w&&A.length<8?G("min pass 8"):(c(a._id,{name:o,type:w,speed:E,frequency:F,address:v,coordinates:b,password:"secure"===w?A:""}),G(!1),void n()):G("Name min length 3")},children:"Update"})})]})})),fe={deletePoint:function(e){return function(){var t=Object(m.a)(v.a.mark((function t(n){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ce(e);case 2:if((r=t.sent).success){t.next=5;break}return t.abrupt("return",n(q(r.message)));case 5:n(oe(e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},xe=Object(i.b)((function(e){return{isAdmin:e.user.isAdmin}}),(function(e){return Object(u.b)(fe,e)}))((function(e){var t=e.point,n=e.isAdmin,a=(e.editPoint,e.deletePoint),c=Object(r.useState)(!1),i=Object(s.a)(c,2),u=i[0],o=i[1],l=Object(r.useState)(!1),j=Object(s.a)(l,2),d=j[0],b=j[1];return Object(M.jsxs)("div",{className:"PointItem",children:[Object(M.jsx)(pe,{close:function(){return o(!1)},open:u,text:"Are you sure?",confirmCb:function(){return a(t._id)}}),Object(M.jsx)(he,{open:d,close:function(){return b(!1)},point:t}),Object(M.jsxs)("div",{children:[Object(M.jsx)("span",{className:"label",children:"Name: "})," ",t.name]}),Object(M.jsxs)("div",{children:[Object(M.jsx)("span",{className:"label",children:"Address: "})," ",t.address]}),Object(M.jsxs)("div",{children:[Object(M.jsx)("span",{className:"label",children:"Type: "})," ",t.type]}),"secure"===t.type&&Object(M.jsxs)("div",{children:[Object(M.jsx)("span",{className:"label",children:"Password: "})," ",t.password]}),Object(M.jsxs)("div",{children:[Object(M.jsx)("span",{className:"label",children:"Speed: "})," ",t.speed]}),Object(M.jsxs)("div",{children:[Object(M.jsx)("span",{className:"label",children:"Frequency: "})," ",t.frequency]}),n&&Object(M.jsxs)("div",{className:"actions",children:[Object(M.jsx)(f.a,{color:"yellow",onClick:function(){return b(!0)},children:"Update"}),Object(M.jsx)(f.a,{color:"red",onClick:function(){return o(!0)},children:"Delete"})]})]})})),ve=(n(208),function(e){var t=e.points,n=e.withLabel,r=void 0===n||n;return Object(M.jsxs)("div",{className:"PointsList",children:[r&&Object(M.jsx)("h2",{children:"Wifi Points: "}),t.length?t.map((function(e){return Object(M.jsx)(xe,{point:e},e._id)})):Object(M.jsx)("div",{className:"empty",children:"No points!"})]})}),me={getAllPoints:le},ge=Object(i.b)((function(e){return{points:e.wifiPoint}}),(function(e){return Object(u.b)(me,e)}))((function(e){var t=e.points,n=e.getAllPoints,a=Object(r.useState)(!0),c=Object(s.a)(a,2),i=c[0],u=c[1],o=Object(r.useState)(!1),l=Object(s.a)(o,2),j=l[0],d=l[1];return Object(r.useEffect)((function(){n().finally((function(){return u(!1)}))}),[]),i?Object(M.jsx)($,{}):(console.log(t),Object(M.jsx)("div",{className:"page",children:Object(M.jsxs)(O.a,{className:"Home",children:[Object(M.jsx)(Q,{points:t,width:"50%",height:"100%",filterRadius:j}),Object(M.jsxs)("div",{className:"rightBlock",children:[Object(M.jsx)(de,{setFilterMarker:d}),Object(M.jsx)(ve,{points:t})]})]})}))})),ye=(n(209),{createPoint:function(e){return function(){var t=Object(m.a)(v.a.mark((function t(n){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,re(e);case 2:if((r=t.sent).success){t.next=5;break}return t.abrupt("return",n(q(r.message)));case 5:n((a=r.point,{type:_,data:a}));case 6:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}()}}),we=Object(i.b)(null,(function(e){return Object(u.b)(ye,e)}))((function(e){var t=e.open,n=e.close,a=e.createPoint,c=Object(r.useState)(""),i=Object(s.a)(c,2),u=i[0],o=i[1],l=Object(r.useState)(""),j=Object(s.a)(l,2),d=j[0],b=j[1],p=Object(r.useState)("open"),O=Object(s.a)(p,2),x=O[0],v=O[1],m=Object(r.useState)(2.4),g=Object(s.a)(m,2),y=g[0],w=g[1],k=Object(r.useState)(0),C=Object(s.a)(k,2),S=C[0],A=C[1],N=Object(r.useState)(""),P=Object(s.a)(N,2),R=P[0],E=P[1],_=Object(r.useState)(!1),I=Object(s.a)(_,2),T=I[0],F=I[1];return Object(M.jsxs)(be.a,{className:"CreatePoint",onClose:n,open:t,children:[Object(M.jsx)(be.a.Header,{children:"Create new point:"}),Object(M.jsx)(be.a.Content,{children:Object(M.jsxs)(be.a.Description,{children:[T&&Object(M.jsx)("div",{className:"error",children:T}),Object(M.jsxs)(ee.a,{children:[Object(M.jsx)(h.a,{placeholder:"Name...",value:u,onChange:function(e){return o(e.target.value)}}),Object(M.jsx)(ne.a,{apiKey:Y,onPlaceSelected:function(e){return b(e)},options:{types:["address"],componentRestrictions:{country:"ua"}}}),Object(M.jsxs)(ee.a.Group,{inline:!0,children:[Object(M.jsx)("label",{children:"Type: "}),Object(M.jsx)(ee.a.Radio,{label:"Open",value:"open",checked:"open"===x,onChange:function(e){return v("open")}}),Object(M.jsx)(ee.a.Radio,{label:"Secure",value:"secure",checked:"secure"===x,onChange:function(){return v("secure")}})]}),"secure"===x&&Object(M.jsx)(h.a,{placeholder:"Password...",value:R,onChange:function(e){return E(e.target.value)}}),Object(M.jsx)(h.a,{type:"number",placeholder:"Speed...",value:S,onChange:function(e){return A(e.target.value)}}),Object(M.jsxs)(ee.a.Group,{inline:!0,children:[Object(M.jsx)("label",{children:"Frequency (\u0413\u0413\u0446)"}),Object(M.jsx)(ee.a.Radio,{label:"2.4",value:2.4,checked:2.4===y,onChange:function(e){return w(2.4)}}),Object(M.jsx)(ee.a.Radio,{label:"5",value:5,checked:5===y,onChange:function(){return w(5)}})]})]})]})}),Object(M.jsx)(be.a.Actions,{children:Object(M.jsx)(f.a,{color:"teal",onClick:function(){return H("string",u)?d&&d.geometry.location&&d.formatted_address?S<0||S>500?F("Speed error"):"secure"===x&&R.length<8?F("min pass 8"):(a({name:u,type:x,speed:S,frequency:y,coordinates:{lat:d.geometry.location.lat(),lng:d.geometry.location.lng()},address:d.formatted_address}),F(!1),void n()):F("Place error"):F("Name min length 3")},children:"Create"})})]})})),ke=(n(210),{getAllPoints:le}),Ce=Object(i.b)((function(e){return{points:e.wifiPoint}}),(function(e){return Object(u.b)(ke,e)}))((function(e){var t=e.points,n=e.getAllPoints,a=Object(r.useState)(!0),c=Object(s.a)(a,2),i=c[0],u=c[1],o=Object(r.useState)(!1),l=Object(s.a)(o,2),j=l[0],d=l[1];return Object(r.useEffect)((function(){n().finally((function(){return u(!1)}))}),[]),i?Object(M.jsx)($,{}):Object(M.jsxs)("div",{className:"page",children:[j&&Object(M.jsx)(we,{open:j,close:function(){return d(!1)}}),Object(M.jsxs)(O.a,{className:"Points",children:[Object(M.jsxs)("h2",{children:[Object(M.jsx)("span",{children:"Wifi points: "}),Object(M.jsx)(f.a,{onClick:function(){return d(!0)},children:"Add point"})]}),Object(M.jsx)(ve,{points:t,withLabel:!1})]})]})})),Se=[{path:j,Component:D},{path:d,Component:D},{path:b,Component:ge}],Ae=[{path:p,Component:Ce}],Ne=Object(i.b)((function(e){return{isAuth:e.user.isAuth}}))((function(e){var t=e.isAuth;return Object(M.jsxs)(l.d,{children:[t&&Ae.map((function(e){var t=e.path,n=e.Component;return Object(M.jsx)(l.b,{path:t,component:n,exact:!0},t)})),Se.map((function(e){var t=e.path,n=e.Component;return Object(M.jsx)(l.b,{path:t,component:n,exact:!0},t)})),Object(M.jsx)(l.a,{to:b})]})})),Pe=(n(211),{logout:function(){return function(){var e=Object(m.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("token"),t({type:E});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),Re=Object(i.b)((function(e){var t=e.user;return{isAuth:t.isAuth,isAdmin:t.isAdmin}}),(function(e){return Object(u.b)(Pe,e)}))((function(e){var t=e.isAuth,n=e.isAdmin,r=e.logout,a=e.openCreateForm;return Object(M.jsxs)("header",{className:"Header",children:[Object(M.jsx)("div",{className:"logo",children:Object(M.jsx)("h1",{children:Object(M.jsx)(o.b,{to:b,children:"WiFi Map"})})}),Object(M.jsx)("div",{className:"nav",children:t?Object(M.jsxs)("div",{className:"nav_list",children:[n?Object(M.jsx)(o.b,{to:p,children:"Wifi points"}):Object(M.jsx)(o.b,{onClick:a,children:"Add Point"}),Object(M.jsx)(o.b,{to:b,onClick:function(){return r()},children:"Logout"})]}):Object(M.jsx)(o.b,{to:j,children:"Login"})})]})})),Ee=n(232),_e=(n(212),function(e){var t=e.error;return Object(M.jsxs)(Ee.a,{className:"ErrorMessage",children:[Object(M.jsx)(Ee.a.Header,{children:"Error!"}),Object(M.jsx)("p",{children:t.message})]})}),Ie={checkAuth:function(){return function(){var e=Object(m.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:if((n=e.sent).success){e.next=5;break}return e.abrupt("return",!1);case 5:localStorage.setItem("token",n.token),t((r=n.user,{type:R,data:r}));case 7:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()}},Te=Object(i.b)((function(e){var t=e.error,n=e.user;return{error:t,isAdmin:n.isAdmin,isAuth:n.isAuth}}),(function(e){return Object(u.b)(Ie,e)}))((function(e){var t=e.error,n=e.checkAuth,a=e.isAuth,c=e.isAdmin,i=Object(r.useState)(!1),u=Object(s.a)(i,2),l=u[0],j=u[1];return Object(r.useEffect)((function(){n()}),[]),Object(M.jsxs)(o.a,{children:[t.isError&&Object(M.jsx)(_e,{error:t}),a&&!c&&Object(M.jsx)(we,{open:l,close:function(){return j(!1)}}),Object(M.jsx)(Re,{openCreateForm:function(){return j(!0)}}),Object(M.jsx)(Ne,{})]})})),Fe=n(42),Le=n(153),Ue={isError:!1,message:""},ze={isAuth:!1,data:{},isAdmin:!1},qe=n(95),He=[],Ge=[Le.a],Me=Object(u.d)(u.a.apply(void 0,Ge)),We={error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return{isError:!0,message:t.data};case U:return Object(Fe.a)({},Ue);default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:case R:return Object(Fe.a)(Object(Fe.a)({},e),{},{isAuth:!0,data:t.data,isAdmin:"admin"===t.data.role});case E:return Object(Fe.a)({},ze);default:return e}},wifiPoint:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return[].concat(Object(qe.a)(e),[t.data]);case I:return Object(qe.a)(e.map((function(e){return e._id===t.data._id?Object(Fe.a)({},t.data):e})));case T:return Object(qe.a)(e.filter((function(e){return e._id!==t.id})));case F:return Object(qe.a)(t.data);default:return e}}},De=Object(u.c)(Object(Fe.a)({},We)),Ke=Object(u.e)(De,{},Me);window.store=Ke;var Be=Ke;n(213),n(214);c.a.render(Object(M.jsx)(i.a,{store:Be,children:Object(M.jsx)(Te,{})}),document.getElementById("root"))}},[[215,1,2]]]);
//# sourceMappingURL=main.a0c834d0.chunk.js.map